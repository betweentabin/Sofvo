# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…çŠ¶æ³ã¾ã¨ã‚

## ğŸ“Š å®Ÿè£…çŠ¶æ³ã‚µãƒãƒªãƒ¼

### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½
- âœ… **Supabase** - ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
- âœ… **Supabase** - èªè¨¼åŸºç›¤
- âœ… **Supabase** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- âš ï¸ **Node.js** - èªè¨¼ãƒ«ãƒ¼ãƒˆï¼ˆéƒ¨åˆ†å®Ÿè£…ï¼‰
- âœ… **çµ±åˆ** - Supabaseèªè¨¼ã‚’Node.jsã§æ¤œè¨¼ã™ã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

### æœªå®Ÿè£…æ©Ÿèƒ½
- âŒ **Node.js** - ãƒãƒ¼ãƒ ç®¡ç†API
- âŒ **Node.js** - å¤§ä¼šç®¡ç†API
- âŒ **Node.js** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
- âŒ **Node.js** - ãŠå•ã„åˆã‚ã›API
- âŒ **Node.js** - é€šçŸ¥è¨­å®šAPI
- âŒ **Node.js** - ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Frontend (React + Vite)      â”‚
â”‚         38å€‹ã®ç”»é¢å®Ÿè£…æ¸ˆã¿        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Supabase â”‚  â”‚  Node.js API  â”‚
    â”‚  (å®Ÿè£…æ¸ˆ) â”‚  â”‚   (æœªå®Ÿè£…)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å®Ÿè£…æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«

### Supabaseé–¢é€£
```
/supabase/schema.sql                 âœ… å®Œå…¨å®Ÿè£…
/src/lib/supabase.js                 âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–
/src/contexts/AuthContext.jsx        âœ… èªè¨¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
/src/hooks/useChat.js                âœ… ãƒãƒ£ãƒƒãƒˆãƒ•ãƒƒã‚¯
/src/components/Chat/ChatMessage.jsx âœ… ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
/src/components/Chat/ChatRoom.jsx    âœ… ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ 
/src/services/api.js                 âœ… APIçµ±åˆãƒ¬ã‚¤ãƒ¤ãƒ¼
```

### Node.js Backendé–¢é€£
```
/backend/src/index.js                     âœ… ã‚µãƒ¼ãƒãƒ¼è¨­å®šï¼ˆSupabaseçµ±åˆæ¸ˆã¿ï¼‰
/backend/src/config/supabase.js          âœ… Supabaseæ¥ç¶šè¨­å®š
/backend/src/middleware/supabase-auth.js âœ… èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
/backend/src/routes/auth.routes.js       âš ï¸ éƒ¨åˆ†å®Ÿè£…ï¼ˆMongoDBãƒ™ãƒ¼ã‚¹ï¼‰
/backend/src/routes/user.routes.js       âŒ æœªå®Ÿè£…
/backend/src/routes/team.routes.js       âŒ æœªå®Ÿè£…
/backend/src/routes/tournament.routes.js âŒ æœªå®Ÿè£…
/backend/src/routes/message.routes.js    âŒ æœªå®Ÿè£…ï¼ˆSupabaseã§ä»£æ›¿ï¼‰
/backend/src/routes/notification.routes.js âŒ æœªå®Ÿè£…
/backend/src/routes/contact.routes.js    âŒ æœªå®Ÿè£…
/backend/src/routes/media.routes.js      âŒ æœªå®Ÿè£…
```

## ğŸ—‚ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆSupabaseï¼‰

### å®Ÿè£…æ¸ˆã¿ãƒ†ãƒ¼ãƒ–ãƒ«
| ãƒ†ãƒ¼ãƒ–ãƒ«å | ç”¨é€” | RLS | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  |
|-----------|------|-----|------------|
| profiles | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« | âœ… | âŒ |
| teams | ãƒãƒ¼ãƒ æƒ…å ± | âœ… | âŒ |
| team_members | ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ | âœ… | âŒ |
| conversations | ä¼šè©± | âœ… | âŒ |
| conversation_participants | ä¼šè©±å‚åŠ è€… | âœ… | âœ… |
| messages | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | âœ… | âœ… |
| tournaments | å¤§ä¼š | âœ… | âŒ |
| tournament_participants | å¤§ä¼šå‚åŠ è€… | âœ… | âŒ |
| tournament_results | å¤§ä¼šçµæœ | âœ… | âŒ |
| notifications | é€šçŸ¥ | âœ… | âœ… |

## ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”»é¢ã¨å¿…è¦ãªAPI

### èªè¨¼ç³»
| ç”»é¢ | å¿…è¦ãªAPI | å®Ÿè£…çŠ¶æ³ |
|-----|----------|---------|
| ãƒ­ã‚°ã‚¤ãƒ³ | POST /api/auth/login | âœ… Supabase |
| ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ | POST /api/auth/register | âœ… Supabase |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆ | POST /api/users/profile | âŒ |
| é€€ä¼š | DELETE /api/auth/withdraw | âš ï¸ Node.jséƒ¨åˆ†å®Ÿè£… |

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ç³»
| ç”»é¢ | å¿…è¦ãªAPI | å®Ÿè£…çŠ¶æ³ |
|-----|----------|---------|
| ãƒã‚¤ãƒšãƒ¼ã‚¸ | GET /api/users/me | âŒ |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›† | PUT /api/users/me | âŒ |
| ç™»éŒ²æƒ…å ±å¤‰æ›´ | PUT /api/users/settings | âŒ |
| é€šçŸ¥è¨­å®š | PUT /api/users/notification-settings | âŒ |
| ãŠã™ã™ã‚ | GET /api/users/recommended | âŒ |

### ãƒãƒ¼ãƒ ç³»
| ç”»é¢ | å¿…è¦ãªAPI | å®Ÿè£…çŠ¶æ³ |
|-----|----------|---------|
| ãƒãƒ¼ãƒ ä½œæˆ | POST /api/teams | âŒ |
| ãƒãƒ¼ãƒ ç”»é¢(ãƒ¡ãƒ³ãƒãƒ¼) | GET /api/teams/:id | âŒ |
| ãƒãƒ¼ãƒ ç”»é¢(ç®¡ç†è€…) | GET /api/teams/:id + ç®¡ç†æ©Ÿèƒ½ | âŒ |
| ãƒãƒ¼ãƒ ç®¡ç†ç”»é¢ | PUT /api/teams/:id | âŒ |
| ãƒãƒ¼ãƒ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›† | PUT /api/teams/:id/profile | âŒ |
| ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç† | CRUD /api/teams/:id/members | âŒ |
| ãƒãƒ¼ãƒ è§£æ•£ | DELETE /api/teams/:id | âŒ |

### å¤§ä¼šç³»
| ç”»é¢ | å¿…è¦ãªAPI | å®Ÿè£…çŠ¶æ³ |
|-----|----------|---------|
| ã•ãŒã™ | GET /api/tournaments/search | âŒ |
| å¤§ä¼šå‹Ÿé›†ç”»é¢ | GET /api/tournaments/:id | âŒ |
| å¤§ä¼šã‚’ä¸»å‚¬ | POST /api/tournaments | âŒ |
| å¤§ä¼šã‚’ç·¨é›† | PUT /api/tournaments/:id | âŒ |
| ä¸»å‚¬å¤§ä¼šç®¡ç† | GET /api/tournaments/my-hosted | âŒ |
| å‚åŠ äºˆå®šå¤§ä¼š | GET /api/tournaments/my-participating | âŒ |
| å¤§ä¼šçµæœå€‹åˆ¥ç”»é¢ | GET /api/tournaments/:id/results | âŒ |
| å¤§ä¼šçµæœç·åˆç”»é¢ | GET /api/tournaments/:id/results/all | âŒ |

### ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç³»
| ç”»é¢ | å¿…è¦ãªAPI | å®Ÿè£…çŠ¶æ³ |
|-----|----------|---------|
| DM | Supabase Realtime | âœ… Supabase |
| ãŠçŸ¥ã‚‰ã› | GET /api/notifications | âœ… Supabase |
| ãŠå•ã„åˆã‚ã›ï¼ˆè¨˜å…¥ï¼‰ | - | - |
| ãŠå•ã„åˆã‚ã›ï¼ˆé€ä¿¡ï¼‰ | POST /api/contact | âŒ |
| ãŠå•ã„åˆã‚ã›ï¼ˆå®Œäº†ï¼‰ | - | - |

### ãã®ä»–
| ç”»é¢ | å¿…è¦ãªAPI | å®Ÿè£…çŠ¶æ³ |
|-----|----------|---------|
| ãƒ›ãƒ¼ãƒ  | GET /api/home/feed | âŒ |
| è¨­å®šç”»é¢ | GET /api/settings | âŒ |
| åˆ©ç”¨è¦ç´„ | é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ | - |
| ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ | é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ | - |

## ğŸš¨ å®Ÿè£…å„ªå…ˆåº¦

### Priority 1 - æœ€å„ªå…ˆï¼ˆåŸºæœ¬æ©Ÿèƒ½ï¼‰
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API** (`/backend/src/routes/user.routes.js`)
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—ãƒ»æ›´æ–°
   - è¨­å®šç®¡ç†
   
2. **ãƒãƒ¼ãƒ ç®¡ç†API** (`/backend/src/routes/team.routes.js`)
   - ãƒãƒ¼ãƒ CRUD
   - ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†

### Priority 2 - é«˜å„ªå…ˆåº¦ï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
3. **å¤§ä¼šç®¡ç†API** (`/backend/src/routes/tournament.routes.js`)
   - å¤§ä¼šCRUD
   - å‚åŠ ç®¡ç†
   - çµæœç®¡ç†

4. **ãƒ›ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰API** (`/backend/src/routes/home.routes.js`)
   - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
   - ãŠã™ã™ã‚è¡¨ç¤º

### Priority 3 - ä¸­å„ªå…ˆåº¦ï¼ˆè£œåŠ©æ©Ÿèƒ½ï¼‰
5. **é€šçŸ¥è¨­å®šAPI** (`/backend/src/routes/notification.routes.js`)
   - é€šçŸ¥è¨­å®šç®¡ç†
   - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥

6. **ãŠå•ã„åˆã‚ã›API** (`/backend/src/routes/contact.routes.js`)
   - å•ã„åˆã‚ã›é€ä¿¡
   - å±¥æ­´ç®¡ç†

### Priority 4 - ä½å„ªå…ˆåº¦ï¼ˆæ‹¡å¼µæ©Ÿèƒ½ï¼‰
7. **ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API** (`/backend/src/routes/media.routes.js`)
   - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

## ğŸ“ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å¿…é ˆå®Ÿè£…é …ç›®
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†API
- [ ] ãƒãƒ¼ãƒ ä½œæˆãƒ»ç®¡ç†API
- [ ] ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†API
- [ ] å¤§ä¼šä½œæˆãƒ»ç®¡ç†API
- [ ] å¤§ä¼šå‚åŠ ç®¡ç†API
- [ ] å¤§ä¼šçµæœç™»éŒ²API
- [ ] ãƒ›ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰API
- [ ] æ¤œç´¢APIï¼ˆãƒãƒ¼ãƒ ã€å¤§ä¼šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- [ ] ãŠå•ã„åˆã‚ã›API
- [ ] è¨­å®šç®¡ç†API

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¿½åŠ é …ç›®
- [ ] ãƒ›ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ç”¨ã®postsãƒ†ãƒ¼ãƒ–ãƒ«
- [ ] ã„ã„ã­ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
- [ ] ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
- [ ] æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é …ç›®
- [ ] API Rate Limitingå¼·åŒ–
- [ ] å…¥åŠ›æ¤œè¨¼ã®çµ±ä¸€
- [ ] SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªï¼‰
- [ ] XSSå¯¾ç­–
- [ ] CORSè¨­å®šã®æœ¬ç•ªå¯¾å¿œ

## ğŸ”§ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. **Node.jsãƒ«ãƒ¼ãƒˆå®Ÿè£…**
   ```bash
   # å„ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   cd backend/src/routes
   touch user.routes.js team.routes.js tournament.routes.js
   touch home.routes.js contact.routes.js media.routes.js
   ```

2. **Supabaseèªè¨¼ã¨ã®å®Œå…¨çµ±åˆ**
   - ç¾åœ¨ã®auth.routes.jsã‚’Supabaseãƒ™ãƒ¼ã‚¹ã«æ›¸ãæ›ãˆ
   - MongoDBã®ä¾å­˜ã‚’å‰Šé™¤

3. **APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ**
   - Swagger/OpenAPIä»•æ§˜æ›¸ã®ä½œæˆ
   - APIãƒ†ã‚¹ãƒˆã®å®Ÿè£…

4. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆ**
   - å„ç”»é¢ã‹ã‚‰APIã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«å®Ÿè£…
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€

## ğŸ“Š å®Ÿè£…é€²æ—

```
å…¨ä½“é€²æ—: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20%

SupabaseåŸºç›¤:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
èªè¨¼ã‚·ã‚¹ãƒ†ãƒ :      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%
ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
ãƒãƒ¼ãƒ ç®¡ç†:        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
å¤§ä¼šç®¡ç†:          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†:      â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20%
é€šçŸ¥æ©Ÿèƒ½:          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%
ãŠå•ã„åˆã‚ã›:      â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†:      â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
```

## ğŸ’¡ æ¨å¥¨äº‹é …

1. **æ®µéšçš„å®Ÿè£…**
   - ã¾ãšãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒãƒ¼ãƒ ç®¡ç†ã‚’å®Œæˆ
   - æ¬¡ã«å¤§ä¼šæ©Ÿèƒ½
   - æœ€å¾Œã«è£œåŠ©æ©Ÿèƒ½

2. **ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º**
   - å„APIã«ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Ÿè£…
   - çµ±åˆãƒ†ã‚¹ãƒˆã®ä½œæˆ

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æ¤œè¨

4. **ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°**
   - ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼ˆSentryç­‰ï¼‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°